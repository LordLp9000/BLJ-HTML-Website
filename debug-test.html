<!DOCTYPE html>
<html>
<head>
    <title>Debug Test</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #333; color: white; }
        button { padding: 10px; margin: 5px; background: #0066ff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .section { background: #444; padding: 20px; margin: 10px 0; border-radius: 8px; min-height: 200px; }
        .player-card { background: linear-gradient(135deg, #6f00ff, #0004ff); padding: 1rem; margin: 1rem 0; border-radius: 8px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Debug Test for GOAT Sports Issues</h1>
    
    <h3>Test 1: Achievement Rating Display</h3>
    <button onclick="testAchievementRating()">Test Achievement Rating</button>
    <div id="achievement-test" class="section"></div>
    
    <h3>Test 2: Player Card Toggle</h3>
    <button onclick="testPlayerToggle()">Test Player Card Toggle</button>
    <div id="toggle-test" class="section"></div>
    
    <h3>Test 3: Sport Section Population</h3>
    <button onclick="testSportSection()">Test Sport Section Population</button>
    <div id="sport-test" class="section"></div>
    
    <script>
        // Test data
        const testPlayer = {
            name: "Michael Jordan",
            score: 97.2,
            position: "SG",
            career: "1984-2003",
            country: "USA",
            offensive: 10.0,
            defensive: 8.8,
            achievementsRating: 10.0,
            achievements: "6x NBA Champion, 6x Finals MVP"
        };
        
        // Test 1: Achievement Rating Display
        function testAchievementRating() {
            const container = document.getElementById('achievement-test');
            
            // Test the achievement rating display as in the original code
            const achievementRatingDisplay = `${(testPlayer.achievementsRating || 8.0).toFixed(1)}/10`;
            const achievementTextDisplay = `${testPlayer.achievements}/10`;
            
            container.innerHTML = `
                <h4>Achievement Rating Test:</h4>
                <p><strong>Correct (Rating):</strong> ${achievementRatingDisplay}</p>
                <p><strong>Incorrect (Text):</strong> ${achievementTextDisplay}</p>
                <p><strong>Raw achievementsRating:</strong> ${testPlayer.achievementsRating}</p>
                <p><strong>Raw achievements:</strong> ${testPlayer.achievements}</p>
            `;
        }
        
        // Test 2: Player Card Toggle
        function testPlayerToggle() {
            const container = document.getElementById('toggle-test');
            
            container.innerHTML = `
                <div class="player-card" id="test-card">
                    <h4>1. ${testPlayer.name}</h4>
                    <p>Score: ${testPlayer.score}</p>
                    <div id="test-details" style="display: none; margin-top: 10px; padding-top: 10px; border-top: 1px solid #ccc;">
                        <p><strong>Position:</strong> ${testPlayer.position}</p>
                        <p><strong>Career:</strong> ${testPlayer.career}</p>
                        <p><strong>Achievements:</strong> ${testPlayer.achievements}</p>
                    </div>
                </div>
            `;
            
            // Test onclick handler timing - this is the critical fix
            const playerCard = document.getElementById('test-card');
            playerCard.onclick = () => {
                const details = document.getElementById('test-details');
                const isHidden = details.style.display === 'none';
                details.style.display = isHidden ? 'block' : 'none';
                console.log('Player card clicked, details now:', details.style.display);
            };
        }
        
        // Test 3: Sport Section Population
        function testSportSection() {
            const container = document.getElementById('sport-test');
            
            // Simulate what happens when showSection is called
            container.innerHTML = '<h4>Testing Sport Section Population...</h4>';
            
            // Test if we can find elements like the main site
            const testContainer = document.createElement('div');
            testContainer.id = 'test-basketball-rankings-grid';
            container.appendChild(testContainer);
            
            // Simulate displaySportRankings call
            testDisplaySportRankings('basketball', 'test-basketball-rankings-grid');
        }
        
        function testDisplaySportRankings(sport, containerId) {
            const container = document.getElementById(containerId);
            if (!container) {
                console.log('Container not found:', containerId);
                return;
            }
            
            // Simulate the main function logic
            container.innerHTML = `
                <div class="player-card">
                    <h4>1. ${testPlayer.name}</h4>
                    <p>Score: ${testPlayer.score}</p>
                    <p>Sport: ${sport}</p>
                    <p>Achievement Rating: ${(testPlayer.achievementsRating || 8.0).toFixed(1)}/10</p>
                </div>
            `;
            
            console.log('displaySportRankings called successfully for:', sport);
        }
        
        // Initial test
        console.log('Debug test page loaded');
    </script>
</body>
</html>
